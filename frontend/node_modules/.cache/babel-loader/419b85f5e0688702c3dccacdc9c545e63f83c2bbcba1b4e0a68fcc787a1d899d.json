{"ast":null,"code":"import _objectSpread from\"/Users/tanishtyagi/Desktop/mern-chat/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import API from\"../utils/api\";import{getSocket}from\"../utils/socket\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Sidebar(_ref){let{selectUser}=_ref;const[users,setUsers]=useState([]);useEffect(()=>{const fetchUsers=async()=>{const res=await API.get(\"/users\");setUsers(res.data);};fetchUsers();const socket=getSocket();socket===null||socket===void 0?void 0:socket.on(\"online_users\",onlineIds=>{setUsers(prev=>prev.map(u=>_objectSpread(_objectSpread({},u),{},{online:onlineIds.includes(u._id)})));});return()=>{socket===null||socket===void 0?void 0:socket.off(\"online_users\");};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users\"}),users.map(u=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectUser(u),className:\"user-item\",children:[u.username,\" \",u.online?\"ðŸŸ¢\":\"âšª\"]},u._id))]});}","map":{"version":3,"names":["useEffect","useState","API","getSocket","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","selectUser","users","setUsers","fetchUsers","res","get","data","socket","on","onlineIds","prev","map","u","_objectSpread","online","includes","_id","off","className","children","onClick","username"],"sources":["/Users/tanishtyagi/Desktop/mern-chat/frontend/src/components/Sidebar.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport API from \"../utils/api\";\nimport { getSocket } from \"../utils/socket\";\n\ninterface User {\n  _id: string;\n  username: string;\n  online: boolean;\n}\n\nexport default function Sidebar({ selectUser }: { selectUser: (user: User) => void }) {\n  const [users, setUsers] = useState<User[]>([]);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const res = await API.get(\"/users\");\n      setUsers(res.data);\n    };\n    fetchUsers();\n\n    const socket = getSocket();\n    socket?.on(\"online_users\", (onlineIds: string[]) => {\n      setUsers(prev => prev.map(u => ({ ...u, online: onlineIds.includes(u._id) })));\n    });\n\n    return () => {\n      socket?.off(\"online_users\");\n    };\n  }, []);\n\n  return (\n    <div className=\"sidebar\">\n      <h3>Users</h3>\n      {users.map(u => (\n        <div key={u._id} onClick={() => selectUser(u)} className=\"user-item\">\n          {u.username} {u.online ? \"ðŸŸ¢\" : \"âšª\"}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"kIAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,GAAG,KAAM,cAAc,CAC9B,OAASC,SAAS,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAQ5C,cAAe,SAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAuD,IAAtD,CAAEC,UAAiD,CAAC,CAAAD,IAAA,CAClF,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAS,EAAE,CAAC,CAE9CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAZ,GAAG,CAACa,GAAG,CAAC,QAAQ,CAAC,CACnCH,QAAQ,CAACE,GAAG,CAACE,IAAI,CAAC,CACpB,CAAC,CACDH,UAAU,CAAC,CAAC,CAEZ,KAAM,CAAAI,MAAM,CAAGd,SAAS,CAAC,CAAC,CAC1Bc,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEC,EAAE,CAAC,cAAc,CAAGC,SAAmB,EAAK,CAClDP,QAAQ,CAACQ,IAAI,EAAIA,IAAI,CAACC,GAAG,CAACC,CAAC,EAAAC,aAAA,CAAAA,aAAA,IAAUD,CAAC,MAAEE,MAAM,CAAEL,SAAS,CAACM,QAAQ,CAACH,CAAC,CAACI,GAAG,CAAC,EAAG,CAAC,CAAC,CAChF,CAAC,CAAC,CAEF,MAAO,IAAM,CACXT,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEU,GAAG,CAAC,cAAc,CAAC,CAC7B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEpB,KAAA,QAAKqB,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBxB,IAAA,OAAAwB,QAAA,CAAI,OAAK,CAAI,CAAC,CACblB,KAAK,CAACU,GAAG,CAACC,CAAC,eACVf,KAAA,QAAiBuB,OAAO,CAAEA,CAAA,GAAMpB,UAAU,CAACY,CAAC,CAAE,CAACM,SAAS,CAAC,WAAW,CAAAC,QAAA,EACjEP,CAAC,CAACS,QAAQ,CAAC,GAAC,CAACT,CAAC,CAACE,MAAM,CAAG,IAAI,CAAG,GAAG,GAD3BF,CAAC,CAACI,GAEP,CACN,CAAC,EACC,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}